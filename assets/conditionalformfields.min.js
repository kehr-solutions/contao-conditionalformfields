!function(e,t,i,s){"use strict";let n="conditionalFormFields",l={fields:[],conditions:{},previousValues:{}};function d(t,i){this.element=t,this.settings=e.extend({},l,i),this._defaults=l,this._name=n,this.init()}e.extend(d.prototype,{init:function(){let t=this;t.initFields(),t.initFieldsets(),e(this.element).on("ajax_change",function(){t.initFields(),t.initFieldsets()})},initFields:function(){let t=this;t.fields={},e(t.settings.fields).each(function(i,s){e(t.element).find('*[name^="'+s+'"]').each(function(){let i=e(this),s=i.attr("name");"[]"==s.substr(s.length-2)?(s=s.substr(0,s.length-2),t.fields[s]instanceof Array||(t.fields[s]=[]),t.fields[s].push(i)):"radio"===i.attr("type")?(t.fields[s]instanceof Array||(t.fields[s]=[]),t.fields[s].push(i)):t.fields[s]=i,e(this).on("change",function(){t.toggleFieldsets()})})})},initFieldsets:function(){let t=this;t.fieldsets={},t.fieldsetFields={};for(let i in t.settings.conditions)t.fieldsets[i]=e(".cffs-"+i),t.fieldsetFields[i]=t.fieldsets[i].find("input, select, textarea");t.toggleFieldsets()},toggleFieldsets:function(){let e=this,t=e.getFieldValues();for(let i in e.settings.conditions){let s="let in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+e.settings.conditions[i];new Function("values",s)(t)?e.showFieldset(i):e.hideFieldset(i)}},showFieldset:function(t){this.fieldsets[t].show(),e(this.fieldsetFields[t]).each(function(){e(this).attr("disabled",!1)})},hideFieldset:function(t){this.fieldsets[t].hide(),e(this.fieldsetFields[t]).each(function(){e(this).attr("disabled",!0)})},getFieldValues:function(){let t=this,i=t.settings.previousValues.slice(),s=null;return e.each(t.fields,function(n){e.isArray(this)?e(this).each(function(){if("radio"===e(this).attr("type")){if(s=t.getFieldValue(this))return i[n]=s,!1}else void 0===i[n]&&(i[n]=[]),(s=t.getFieldValue(this))&&i[n].push(s)}):(s=t.getFieldValue(this))&&(i[n]=s)}),i},getFieldValue:function(t){return"checkbox"==(t=e(t)).attr("type")||"radio"==t.attr("type")?t.is(":checked")?t.val():null:t.val()}}),e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new d(this,t))})}}(jQuery,window,document);